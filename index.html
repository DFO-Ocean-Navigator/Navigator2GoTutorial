<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="User documentation for Navigator2Go.">
    <meta name="author" content="Fisheries and Oceans Canada">

    <title>Navigator2Go User Manual</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="vendor/devicons/css/devicons.min.css" rel="stylesheet">
    <link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/resume.min.css" rel="stylesheet">

    <!-- Favicon -->
    <link href="img/logo.png" rel="icon">

  </head>

  <body id="page-top">

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">
        <span class="d-block d-lg-none">Navigator2Go</span>
        <span class="d-none d-lg-block">
          <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="img/logo.png" title="Navigator2Go" alt="Navigator2Go Logo">
        </span>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#intro">Intro</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#installation">Installation</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#firstRun">First Run Tutorial</a>
          </li>
          <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#uninstall">Uninstalling</a>
            </li>
          <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#faq">FAQ</a>
            </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#contact">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/DFO-Ocean-Navigator/Navigator2Go" target="_blank">Github <i class="fa fa-external-link"></i> </a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container-fluid p-0">

      <!-- Intro section -->
      <section class="resume-section p-3 p-lg-5 d-flex d-column" id="intro">
        <div class="my-auto">
          <h1 class="mb-0">Navigator<span class="text-primary">2Go</span></h1>
          <p class="mb-5">User Manual</p>
        </div>
      </section>

      <!-- Installation section -->
      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="installation">
        <div class="my-auto">
          <h2 class="mb-5">Installation</h2>

          <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
              <h3 class="mb-0">Pre-requisites</h3>
              <ul>
                <li>Ubuntu 14.04/16.04 (64-bit/amd64). <i>Ubuntu 18.04 support coming soon. Unfortunately, the Ocean Navigator does not have Windows support at this time. Feel free to contact us regarding this.</i></li>
                <li><code>sudo</code> access (for the initial installation)</li>
                <li>At least 40GB of free disk space. You can use <code>df -h</code> to check :)</li>
                <li>Your favourite terminal emulator. I like <code>terminator</code>.</li>
              </ul>
              <h3 class="mb-0">Ready? Set? Go!</h3>
              <p>We've tried to make the initial installation as painless and automated as possible, however suggestions for improvement are <strong>always</strong> welcome!</p>
              <p>Please note that all required components will be installed to <code>/opt/</code>. For a first-time user, we recommend leaving this unchanged.</p>
              <ul>
                <li>Download this <a href="https://raw.githubusercontent.com/DFO-Ocean-Navigator/Navigator-Installer/master/Installer_Linux.sh" target="_blank">bash script</a> to some directory. Feel free to skim through it; it is well-documented.</li>
                <li>Navigate to the above file in your terminal and type: <code>chmod +x Installer_Linux.sh</code>.</li>
                <li>Type <code>./Installer_Linux.sh</code></li>
                <li>You will eventually be prompted for your <code>sudo</code> password.</li>
                <li>Depending on your network speed, this installation may take upto 15-20 minutes. We have to download several GB of data.</li>
                <li>Check the console output regularly for any errors that occour. Again, feel free to !!CONTACT US!! if you have any issues/questions.</li>
              </ul>
              <h3 class="mb-0">All done!</h3>
              <p>Time to run this thing!</p>
            </div>
          </div>
        </div>

      </section>

      <!-- First Run section -->
      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="firstRun">
        <div class="my-auto">
          <h2 class="mb-5">First Run Tutorial</h2>

          <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
              <p>You've now hopefully installed Navigator2Go with complete success! Before we get started, please read through the following notes (the technical ones may be ignored).</p>
              <p><strong>Note:</strong> We recommend running the Navigator2Go binary from your favourite terminal emulator. This allows you to see potentially important debug information in the scenario something misbehaves. Sending us the output from your terminal will allow for a patch to be released much more quickly.</p>
              <p><strong>Technical Note:</strong> The Navigator2Go executable is compiled and linked as a static binary, so you can move it from the default installation directory (<code>/opt/Navigator2Go/</code>) to a more convenient place of your choice. Or just create a symlink to it ;)</p>
              <p>This tutorial will take you through the process of acquiring data from our public Ocean Navigator server (<a href="http://navigator.oceansdata.ca" target="_blank">navigator.oceansdata.ca</a>) and displaying data for the Halifax region on your local installation:</p>
              <figure class="figure">
                <img src="img/finalResult.png" class="figure-img img-fluid" alt="Final result">
                <figcaption class="figure-caption">What we will end up with.</figcaption>
              </figure>
              <p>Let's get started!</p>
              <h3 class="mb-0">Starting Up</h3>
              <ul>
                <li>In your favourite terminal emulator: <code>cd /opt/Navigator2Go/</code>.</li>
                <li>Type: <code>./Navigator2Go</code></li>
                <li>You will see the following dialog pop up: <br />
                  <img src="img/firstRunDlg.png" class="figure-img img-fluid" alt="First Run Dialog Prompt">
                  <br />
                  Click OK to continue.
                </li>
                <li>Don't worry about what these all represent as they are documented below.<br />
                  <img src="img/firstRunSetup.png" class="img-fluid" alt="First Run Settings Dialog">
                  <br />
                  These default values should be appropriate for most users.
                  If you are already familiar with the ins-and-outs of Navigator2Go, feel free to tweak these settings.
                  <br />
                  Click OK to continue.
                </li>
                <li>
                  Welcome to your Dashboard!<br />
                  <img src="img/startupDashboard.png" class="img-fluid" alt="Navigator2Go Dashboard">
                </li>
              </ul>
              <h3 class="mb-0">Adding Data</h3>
              <p>After a fresh install, the Navigator is hungry! Let's give it some data to digest :P</p>
              <ul>
                <li>Click on the <i>Data Order</i> tab.</li>
                <li>Leave the <i>Region of Interest</i> unchanged. Read the FAQs on how to change it.</li>
                <li>Under <i>2. Remote Datasets</i>, double-click on <i>GIOPS Daily</i>.</li>
                <li>
                  A new window will appear allowing you to configure the download properties. If you hover over the labels on the left-hand side, you can get some additional information: <br />
                  <img src="img/datasetPropertiesTooltip.png" class="img-fluid" alt="Dataset Properties Tooltip">
                </li>
                <li>In this new window, scroll to the <i>Variable Selection</i> area.</li>
                <li>Click on <i>Temperature</i>.</li>
                <li>Select a date range for the data. <strong>Note:</strong> There is a limit to the selectable date range according to the <i>Quantum</i> attribute:
                  <ul>
                    <li><i>day</i>: 60 days</li>
                    <li><i>month</i>: 5 years (or 60 months></li>
                  </ul>
                </li>
                <li>Click <i>OK</i> to add this dataset to the download queue and close the window.</li>
                <li>You will see a new entry in the <i>Download Queue</i> section (right-hand side): <br />
                  <img src="img/downloadQueue.png" class="img-fluid" alt="Download Queue">
                </li>
                <li>Click the <i>Download Data</i> button to start the download process.</li>
              </ul>
              <p>Unfortunately now is when things get slightly more complex...</p>
              <ul>
                <li>
                  Since we are downloading a new dataset, Navigator2Go doesn't know where to put the downloaded files. If you have lots of storage space available, or only have
                  the 1 drive, the recommended directory for any download is as follows: <code>/opt/thredds_content/data/&lt;dataset_name&gt;</code>. For this example, enter the following:
                  <code>/opt/thredds_content/data/giops_day</code>.
                  <img src="img/dataOrderDatasetLocation.png" class="img-fluid" alt="Dataset Location">
                  <br />
                  Click <i>OK</i>.
                </li>
                <li>
                  Now another dialog will appear...<br />
                  <img src="img/dataOrderEnterTimeDim.png" class="img-fluid" alt="Dataset Time Dimension">
                  <br />
                  This requires some knowledge of the dataset's internal attributes. You need to enter the name of the time dimension for this dataset.
                  This will be passed along to THREDDS in order to aggregate separate files according to time. The time variable may be called <i>time_counter</i>,
                  <i>time</i>, <i>validity_time</i>, etc. It's usually one of the first two...<br />
                  For this example, enter <i>time_counter</i> and click <i>OK</i>.
                </li>
                <li>
                  Now our data will download!
                  <img src="img/dataOrderDownloadProgress.png" class="img-fluid" alt="Data Order Download Progress">
                </li>
                <li>Sit tight while your stuff downloads. You will be notified when downloads are complete.</li>
                <li>
                  NOT DONE YET :( You should be thanking me you don't have to manually edit these files and what-not :P
                </li>
                </ul>
                The last step is to make the Navigator itself aware that we have a dataset ready to analyze.
                <ul>
                  <li>Click on the <i>Dashboard</i> tab.</li>
                  <li>Start the <i>THREDDS Server (Apache Tomcat)</i> in the top-left hand box. You should see some output in your console.</li>
                  <li>Click on the <i>Dataset Config Editor</i> tab.</li>
                  <li>Click on <i>Load Default File</i>.</li>
                  <li>Click on <i>Add Dataset</i>.</li>
                  <li>Enter <i>giops_day</i>.<br />
                    <img src="img/newDatasetKey.png" class="img-fluid" alt="New Dataset key">
                  </li>
                  <li>Double-click on that value in the list to begin editing it's properties.</li>
                  <li>
                    <img src="img/newDataset.png" class="img-fluid" alt="Edit Dataset Properties"><br />
                    Notice how the <i>URL</i> is already filled in for you.
                  </li>
                </ul>
                <strong>Remember:</strong> You can hover over each label on the left-hand side to reveal more information.
                <ul>
                  <li>Fill in the following values:<br />
                    <img src="img/editDatasetProperties.png" class="img-fluid" alt="Edit Dataset Properties">
                  </li>
                  <li>Now click on <i>Magic Scan</i>. It might take a couple of seconds for the window to pop up. That is normal because querying THREDDS is very slow.</li>
                  <li>
                    This dialog allows you to select which <strong>data</strong> variables to auto-magically import. You can hover over each row to see the long name of the variable.
                    <img src="img/magicScan.png" class="img-fluid" alt="Magic Scan"><br />
                    Click on <i>votemper</i> and click <i>OK</i>.
                  </li>
                  <li>There will be a new entry in the <i>Variables</i> table. Doule-click on <i>Name</i> and change it to <i>Temperature</i>.
                    Change <i>Units</i> to <i>Kelvin</i> (no <i>s</i> at the end).
                    Also change <i>Default Min</i> to -5, and <i>Default Max</i> to 30.<br />
                    <img src="img/editDatasetVariables.png" class="img-fluid" alt="Dataset Variables">
                  </li>
                  <li>Save your changes and close with window by click <i>OK</i> in the bottom-right corner.</li>
                  <li>Save your config file to disk by clicking the <i>Save</i> button in the top-right corner of the <i>Dataset Config Editor</i> tab.</li>
                  <li>To start the Ocean Navigator with the "offline" config file we just edited, we must take the Navigator2Go into offline mode as follows: </li>
                  <ul>
                    <li>
                      Press <i>CTRL + SHIFT + P</i> to open the <i>Preferences</i> dialog. <br />
                      <img src="img/preferencesDlg.png" class="img-fluid" alt="Preferences Dialog"> <br />
                      Look familiar?
                    </li>
                    <li>Click on the <i>Network Online/Offline</i> switch and click <i>OK</i>. Navigator2Go is now offline.</li>
                    <li>A new dialog will popup reminding you to restart the <i>Web Server (GUnicorn)</i> to see your changes.</li>
                  </ul>
                  <li>So, let's listen to the program and start the <i>Web Server</i> :P</li>
                  <li>After 5-10 secs, you should see a bunch of output in your console along the lines of <code>[INFO] Booting worker with pid:</code>. The Navigator is now running on your system!</li>
                  <li>
                    Click on the link just below the <i>Web Server (GUnicorn)</i> (<code>http://localhost:5000</code>) label in the <i>Navigator2Go Status</i> box. A new web browser window will open. This should be your result:
                    <img src="img/splashPage.png" class="img-fluid" alt="Ocean Navigator Splash Page"> <br />
                    Click on the <i>OPEN NOW</i> button.
                  </li>
                  <li>
                    After 10-15 secs, your page should look like this:
                    <img src="img/firstPageLoad.png" class="img-fluid" alt="First Page Load"> <br />
                    Note the data around the Halifax region. Feel free to zoom in and make some plots.
                  </li>
                </ul>
                <p>Well that was a bit of a doozy now wasn't it?</p>
                <p><strong>Note:</strong> If you close the Navigator2Go program without stopping both servers, they will continue to run in the background :) But they will not automatically start when you restart your computer.</p>
            </div>
          </div>

        </div>
      </section>

      <!-- Uninstall section -->
      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="uninstall">
          <div class="my-auto">
            <h2 class="mb-5">Uninstallation</h2>
            <p>
              To completely uninstall Navigator2Go (including any local THREDDS data), download and run the following script: <a href="https://raw.githubusercontent.com/DFO-Ocean-Navigator/Navigator-Installer/master/Uninstall_Linux.sh" target="_blank">Uninstall_Linux.sh</a>.
            </p>
          </div>
        </section>

      <!-- FAQ section -->
      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="faq">
          <div class="my-auto">
            <h2 class="mb-5">FAQ</h2>
            <h3 class="mb-0">Table of Contents</h3>
            <ul>
              <li><a href="#updateInstallation" class="js-scroll-trigger">How do I update my installation?</a></li>
              <li><a href="#changeDataOrderRegion" class="js-scroll-trigger">How do I change the Data Order region?</a></li>
              <li><a href="#versionInfo" class="js-scroll-trigger">Where do I find my Navigator2Go version info?</a></li>
              <li><a href="#threddsLogs" class="js-scroll-trigger">Viewing THREDDS log files</a></li>
              <li><a href="#myJobs" class="js-scroll-trigger">What is the <i>My Jobs</i> box in the Dashboard?</a></li>
              <li><a href="#importNetCDF" class="js-scroll-trigger">How do I import my own netCDF file(s)?</a></li>
            </ul>
            
            <h3 class="mb-0" id="updateInstallation"><a href="#updateInstallation">How do I update my installation?</a></h3>
            <p>
              Navigator2Go comes with a built-in update utility that runs every time the program starts. You can manually check for updates by going to: <i>Menu -> Help -> Check for Updates</i>. It checks for updates to Navigator2Go and also to the underlying Ocean Navigator.
              In general, the Navigator2Go only requires downloading a single <code>tar.gz</code>. The Ocean Navigator is pretty complex so if it needs an update, we will do it automagically for you.
            </p>
            <ul>
              <li>If an update to Navigator2Go is available, a dialog box will pop up with a link to the latest release on Github. Download it to your installation directory (default is <code>/opt/Navigator2Go</code>).</li>
              <li>Remove the old version: <code>rm /opt/Navigator2Go/Navigator2Go</code>.</li>
              <li>Use <code>tar xvf Navigator2Go.tar.gz -C /opt/Navigator2Go/</code> to unzip it.</li>
            </ul>
            
            <h3 class="mb-0" id="changeDataOrderRegion"><a href="#changeDataOrderRegion">How do I change the Data Order region?</a></h3>
            <p>
              We define the data order region using a bounding box as follows: <br />
              <img src="img/bbox.png" class="img-fluid" alt="Bounding Box"> <br />
              The values you enter will be stored in the program settings, so they will be saved when you close Navigator2Go. <br />
              <img src="img/dataOrderRegion.png" class="img-fluid" alt="Data Order Region">
            </p>

            <h3 class="mb-0" id="versionInfo"><a href="#versionInfo">Where do I find my Navigator2Go version info?</a></h3>
            <p>
              To help with debugging and the update functions, Navigator2Go embeds it's version number and git commit hash in the <i>About</i> dialog.
              It is accessible via <i>Menu -> Help -> About</i>. It will look like this (the version number and commit hash will change with each release): <br />
              <img src="img/aboutDialog.png" class="img-fluid" alt="About Navigator2Go Dialog Box">
            </p>

            <h3 class="mb-0" id="threddsLogs"><a href="#threddsLogs">Viewing THREDDS log files</a></h3>
            <p>Let's be clear: THREDDS is a huge pain (in you know where) to debug if something is wrong. I've added a quick way to browse all of the relevant THREDDS logs to see if something is amiss.</p>
            <p>For detailed info: <a href="https://www.unidata.ucar.edu/software/thredds/v4.5/tds/tutorial/TomcatAndTDSLogs.html" target="_blank">https://www.unidata.ucar.edu/software/thredds/v4.5/tds/tutorial/TomcatAndTDSLogs.html</a></p>
            <ul>
              <li>Go to the <i>THREDDS Config Editor</i>.</li>
              <li>In the bottom right corner, click on <i>Browse Log Files...</i></li>
              <li>Use the dropdown menu to cycle through the logs The currently selected one reloads every 30 secs. Here is what each log file captures:</li>
              <ul>
                <li><strong>cache.log</strong>: contains log messages related to THREDDS object and file caching.</li>
                <li><strong>catalogInit.log</strong>: errors and warnings in your catalog configuration files are shown here. Look at this closely every time you change your config catalogs.</li>
                <li><strong>featureCollectionScan.log</strong>: log messages related to THREDDS feature collection scanning.</li>
                <li><strong>fmrc.log</strong>: usually empty...</li>
                <li><strong>httpout.log</strong>:</li>
                <li><strong>serverStartup.log</strong>: contains log messages from the initialization of THREDDS.</li>
                <li><strong>threddsServlet.log</strong>: contains the log messages for all requests handled by THREDDS. The log file rolls over at the top of every hour with old log files named with the "threddsServlet.log.<yyyy-mm-dd-HH>" pattern. </li>
              </ul>
            </ul>
            
            <h3 class="mb-0" id="myJobs"><a href="#myJobs">What is the <i>My Jobs</i> &nbsp;box in the Dashboard?</a></h3>
            <p>Something cool that is coming soon :)</p>
            <p>Feel free to contact us about this.</p>

            <h3 class="mb-0" id="importNetCDF"><a href="#importNetCDF">How do I import my own netCDF file(s)?</a></h3>
            <p>Suppose you have a couple of netCDF files lying around on your hard drive you wish to view in the Navigator. Well, you're in luck since Navigator2Go can help! Let's get to it...</p>
            <p>To summarize, we will need to do the following: make THREDDS aware of our new dataset, do the actual import operation (which automagically moves your file(s) into the THREDDS directory), then add this dataset to the Navigator config file.</p>
            <ul>
              <li>Start your <del>engines</del> Navigator2Go.</li>
              <li>If this is a new dataset you wish to import continue reading. If you wish to "append" to an existing dataset, skip to the third solid bullet.</li>
              <ul>
                <li>Go to the <i>THREDDS Config Editor</i>.</li>
                <li>Click on <i>Add Dataset</i>.</li>
                <li>
                  Enter a <i>concise</i> name describing your dataset. Ensure you follow the note about illegal characters: <br />
                  <img src="img/addTHREDDSDataset.png" class="img-fluid" alt="Add THREDDDS Dataset">
                </li>
                <li>
                  Now enter the directory where you wish your new dataset files to live. Unless your files are very large, we recommend you using the following convention: <br />
                  <img src="img/newDatasetPath.png" class="img-fluid" alt="New Dataset Path"><br />
                  Where <i>my_dataset</i> is the name you entered in the previous dialog box.
                </li>
                <li>
                  Now enter the name of the time variable for your dataset. This requires some knowledge of the dataset's internal attributes.
                  This will be passed along to THREDDS in order to aggregate separate files according to time. The time variable may be called <i>time_counter</i>,
                  <i>time</i>, <i>validity_time</i>, etc. It's usually one of the first two...<br />
                  <img src="img/newDatasetTimeDim.png" class="img-fluid" alt="New Dataset Time Dimension">
                </li>
              </ul>
              <li>In the <i>Dashboard</i>, click on the <i>Browse</i> button next to the <i>Import NetCDF File(s)</i> label.</li>
              <li>
                This window will appear: <br />
                <img src="img/importNetCDFWindow.png" class="img-fluid" alt="NetCDF Import Window">
              </li>
            </ul>
          </div>
        </section>

      <!-- Contact section -->
      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="contact">
        <div class="my-auto">
          <h2 class="mb-5">Contact</h2>
          <h3>For General Inquiries</h3>
          <ul>
            <li><a href="mailto:fraser.davidson@dfo-mpo.gc.ca?subject=Navigator2Go Question" target="_blank">Fraser Davidson</a></li>
          </ul>
          <h3>For Technical Issues/Questions</h3>
          <ul>
            <li><a href="mailto:nabil.miri@dfo-mpo.gc.ca?subject=Navigator2Go Technical Issue&cc=fraser.davidson@dfo-mpo.gc.ca" target="_blank">Nabil Miri</a></li>
          </ul>
        </div>
      </section>

    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/resume.min.js"></script>

  </body>

</html>
